



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="RICOH THETA development for plug-ins and 360 applications include AR and VR applications">
      
      
        <link rel="canonical" href="http://theta360.guide/plugin-guide/fisheye/">
      
      
        <meta name="author" content="Craig Oda and Jesse Casman">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.2.1">
    
    
      
        <title>Tutorial - Dual Fisheye - THETA V Plugin Development Community Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.ac64251e.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    
      <body data-md-color-primary="light-green" data-md-color-accent="lime">
    
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://theta360.guide/plugin-guide/" title="THETA V Plugin Development Community Guide" class="md-header-nav__button md-logo">
          
            <img src="../assets/images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                THETA V Plugin Development Community Guide
              </span>
              <span class="md-header-nav__topic">
                Tutorial - Dual Fisheye
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/theta360developers/plugin-guide/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../assets/images/logo.png" width="24" height="24">
      
    </span>
    THETA V Plugin Development Community Guide
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/theta360developers/plugin-guide/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Resources and Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Resources and Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../requirements/" title="Requirements" class="md-nav__link">
      Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hardware/" title="Camera Hardware" class="md-nav__link">
      Camera Hardware
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Development Workflow
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Development Workflow
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../use/" title="Plugin Use" class="md-nav__link">
      Plugin Use
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../wifiapi/" title="Using WiFi API" class="md-nav__link">
      Using WiFi API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../customtips/" title="Custom Development Tips" class="md-nav__link">
      Custom Development Tips
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/" title="Plugin Configuration" class="md-nav__link">
      Plugin Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow/" title="Workflow Tips" class="md-nav__link">
      Workflow Tips
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vysortips/" title="Vysor Tips" class="md-nav__link">
      Vysor Tips
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow/submit/" title="Plug-in Submission" class="md-nav__link">
      Plug-in Submission
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../troubleshoot/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Tutorials and Examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Tutorials and Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../custom/" title="Tutorials Overview" class="md-nav__link">
      Tutorials Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorialvysor/" title="Tutorial - Vysor" class="md-nav__link">
      Tutorial - Vysor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorialcolor/" title="Tutorial - LED Color" class="md-nav__link">
      Tutorial - LED Color
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorialcommunication/" title="Tutorial - LED Communication" class="md-nav__link">
      Tutorial - LED Communication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorialbutton/" title="Tutorial - Camera Buttons" class="md-nav__link">
      Tutorial - Camera Buttons
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Tutorial - Dual Fisheye
      </label>
    
    <a href="./" title="Tutorial - Dual Fisheye" class="md-nav__link md-nav__link--active">
      Tutorial - Dual Fisheye
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#concepts-covered" title="Concepts Covered" class="md-nav__link">
    Concepts Covered
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-apk-from-source" title="Install apk from Source" class="md-nav__link">
    Install apk from Source
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#known-issues" title="Known Issues" class="md-nav__link">
    Known Issues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download-github-repository" title="Download GitHub Repository" class="md-nav__link">
    Download GitHub Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-android-project" title="Open Android Project" class="md-nav__link">
    Open Android Project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-apk" title="Build apk" class="md-nav__link">
    Build apk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#locate-apk" title="Locate apk" class="md-nav__link">
    Locate apk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-adb-to-install-apk" title="use adb to install apk" class="md-nav__link">
    use adb to install apk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-vysor-to-set-apk-permissions" title="use Vysor to set apk permissions" class="md-nav__link">
    use Vysor to set apk permissions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-vysor" title="Start Vysor" class="md-nav__link">
    Start Vysor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-apps-in-settings" title="Select Apps in Settings" class="md-nav__link">
    Select Apps in Settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-plugin-application" title="Select Plugin Application" class="md-nav__link">
    Select Plugin Application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-app-info-select-permissions" title="In App Info select Permissions" class="md-nav__link">
    In App Info select Permissions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-storage-and-camera" title="Enable storage and camera" class="md-nav__link">
    Enable storage and camera
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reboot-camera-and-put-into-plug-in-mode" title="Reboot Camera and Put Into Plug-in Mode" class="md-nav__link">
    Reboot Camera and Put Into Plug-in Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#taking-pictures" title="Taking Pictures" class="md-nav__link">
    Taking Pictures
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-image" title="Single Image" class="md-nav__link">
    Single Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-shot-mode" title="3 Shot Mode" class="md-nav__link">
    3 Shot Mode
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#confirm-pictures-were-taken" title="Confirm Pictures were Taken" class="md-nav__link">
    Confirm Pictures were Taken
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stitching-dual-fisheye-images-into-equirectangular" title="Stitching Dual-fisheye Images Into Equirectangular" class="md-nav__link">
    Stitching Dual-fisheye Images Into Equirectangular
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#android-phone-stitching-application" title="Android Phone Stitching Application" class="md-nav__link">
    Android Phone Stitching Application
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#original-dual-fisheye-image" title="Original Dual-fisheye Image" class="md-nav__link">
    Original Dual-fisheye Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callibration-application" title="Callibration Application" class="md-nav__link">
    Callibration Application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stitching-results" title="Stitching Results" class="md-nav__link">
    Stitching Results
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#close-up-on-stitch-line" title="Close-Up on Stitch Line" class="md-nav__link">
    Close-Up on Stitch Line
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hdr-blending-3-shots-into-single-image" title="HDR - Blending 3 Shots into Single Image" class="md-nav__link">
    HDR - Blending 3 Shots into Single Image
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modify-code-to-take-7-images" title="Modify Code to Take 7 Images" class="md-nav__link">
    Modify Code to Take 7 Images
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#benefits" title="Benefits" class="md-nav__link">
    Benefits
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steps" title="Steps" class="md-nav__link">
    Steps
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-open-mainactivityjava" title="1. Open MainActivity.java" class="md-nav__link">
    1. Open MainActivity.java
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-add-variable-for-numberofimages" title="2. Add Variable for NumberOfImages" class="md-nav__link">
    2. Add Variable for NumberOfImages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-reset-bracket-count" title="3. Reset Bracket Count" class="md-nav__link">
    3. Reset Bracket Count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-locate-nextshutter" title="4. Locate nextShutter()" class="md-nav__link">
    4. Locate nextShutter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-create-if-statement-for-modification" title="5. Create if statement for modification" class="md-nav__link">
    5. Create if statement for modification
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-review-exposure-compensation-api" title="6. Review Exposure Compensation API" class="md-nav__link">
    6. Review Exposure Compensation API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-adjust-exposure-compensation" title="7. Adjust Exposure Compensation" class="md-nav__link">
    7. Adjust Exposure Compensation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-build-and-install" title="8. Build and Install" class="md-nav__link">
    8. Build and Install
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-create-single-hdr-image" title="9. Create Single HDR Image" class="md-nav__link">
    9. Create Single HDR Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10-stitch-dual-fisheye-image-into-equirectangular" title="10. Stitch Dual-fisheye Image into Equirectangular" class="md-nav__link">
    10. Stitch Dual-fisheye Image into Equirectangular
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references-and-resources" title="References and Resources" class="md-nav__link">
    References and Resources
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#turning-off-theta-v-stitching" title="Turning off THETA V Stitching" class="md-nav__link">
    Turning off THETA V Stitching
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stitching-with-post-shoot-tools" title="Stitching with Post-Shoot Tools" class="md-nav__link">
    Stitching with Post-Shoot Tools
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ptgui" title="PTGui" class="md-nav__link">
    PTGui
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#original-image" title="Original Image" class="md-nav__link">
    Original Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stitched-image" title="Stitched Image" class="md-nav__link">
    Stitched Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#close-up-image" title="Close-up Image" class="md-nav__link">
    Close-up Image
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-stitching-solutions" title="Other Stitching Solutions" class="md-nav__link">
    Other Stitching Solutions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example/wireless/" title="Example - Wireless Live Streaming" class="md-nav__link">
      Example - Wireless Live Streaming
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example/cloudupload/" title="Example - File Cloud Upload" class="md-nav__link">
      Example - File Cloud Upload
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../example/faceblur/" title="Example - Automatic Face Blue" class="md-nav__link">
      Example - Automatic Face Blue
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Community Resources
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Community Resources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../fun/" title="Fun Tests" class="md-nav__link">
      Fun Tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../concept/" title="Concept Ideas" class="md-nav__link">
      Concept Ideas
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../community/" title="Community" class="md-nav__link">
      Community
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#concepts-covered" title="Concepts Covered" class="md-nav__link">
    Concepts Covered
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-apk-from-source" title="Install apk from Source" class="md-nav__link">
    Install apk from Source
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#known-issues" title="Known Issues" class="md-nav__link">
    Known Issues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download-github-repository" title="Download GitHub Repository" class="md-nav__link">
    Download GitHub Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-android-project" title="Open Android Project" class="md-nav__link">
    Open Android Project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-apk" title="Build apk" class="md-nav__link">
    Build apk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#locate-apk" title="Locate apk" class="md-nav__link">
    Locate apk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-adb-to-install-apk" title="use adb to install apk" class="md-nav__link">
    use adb to install apk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-vysor-to-set-apk-permissions" title="use Vysor to set apk permissions" class="md-nav__link">
    use Vysor to set apk permissions
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-vysor" title="Start Vysor" class="md-nav__link">
    Start Vysor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-apps-in-settings" title="Select Apps in Settings" class="md-nav__link">
    Select Apps in Settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-plugin-application" title="Select Plugin Application" class="md-nav__link">
    Select Plugin Application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-app-info-select-permissions" title="In App Info select Permissions" class="md-nav__link">
    In App Info select Permissions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-storage-and-camera" title="Enable storage and camera" class="md-nav__link">
    Enable storage and camera
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reboot-camera-and-put-into-plug-in-mode" title="Reboot Camera and Put Into Plug-in Mode" class="md-nav__link">
    Reboot Camera and Put Into Plug-in Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#taking-pictures" title="Taking Pictures" class="md-nav__link">
    Taking Pictures
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-image" title="Single Image" class="md-nav__link">
    Single Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-shot-mode" title="3 Shot Mode" class="md-nav__link">
    3 Shot Mode
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#confirm-pictures-were-taken" title="Confirm Pictures were Taken" class="md-nav__link">
    Confirm Pictures were Taken
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stitching-dual-fisheye-images-into-equirectangular" title="Stitching Dual-fisheye Images Into Equirectangular" class="md-nav__link">
    Stitching Dual-fisheye Images Into Equirectangular
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#android-phone-stitching-application" title="Android Phone Stitching Application" class="md-nav__link">
    Android Phone Stitching Application
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#original-dual-fisheye-image" title="Original Dual-fisheye Image" class="md-nav__link">
    Original Dual-fisheye Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callibration-application" title="Callibration Application" class="md-nav__link">
    Callibration Application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stitching-results" title="Stitching Results" class="md-nav__link">
    Stitching Results
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#close-up-on-stitch-line" title="Close-Up on Stitch Line" class="md-nav__link">
    Close-Up on Stitch Line
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hdr-blending-3-shots-into-single-image" title="HDR - Blending 3 Shots into Single Image" class="md-nav__link">
    HDR - Blending 3 Shots into Single Image
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modify-code-to-take-7-images" title="Modify Code to Take 7 Images" class="md-nav__link">
    Modify Code to Take 7 Images
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#benefits" title="Benefits" class="md-nav__link">
    Benefits
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steps" title="Steps" class="md-nav__link">
    Steps
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-open-mainactivityjava" title="1. Open MainActivity.java" class="md-nav__link">
    1. Open MainActivity.java
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-add-variable-for-numberofimages" title="2. Add Variable for NumberOfImages" class="md-nav__link">
    2. Add Variable for NumberOfImages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-reset-bracket-count" title="3. Reset Bracket Count" class="md-nav__link">
    3. Reset Bracket Count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-locate-nextshutter" title="4. Locate nextShutter()" class="md-nav__link">
    4. Locate nextShutter()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-create-if-statement-for-modification" title="5. Create if statement for modification" class="md-nav__link">
    5. Create if statement for modification
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-review-exposure-compensation-api" title="6. Review Exposure Compensation API" class="md-nav__link">
    6. Review Exposure Compensation API
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-adjust-exposure-compensation" title="7. Adjust Exposure Compensation" class="md-nav__link">
    7. Adjust Exposure Compensation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-build-and-install" title="8. Build and Install" class="md-nav__link">
    8. Build and Install
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-create-single-hdr-image" title="9. Create Single HDR Image" class="md-nav__link">
    9. Create Single HDR Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10-stitch-dual-fisheye-image-into-equirectangular" title="10. Stitch Dual-fisheye Image into Equirectangular" class="md-nav__link">
    10. Stitch Dual-fisheye Image into Equirectangular
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references-and-resources" title="References and Resources" class="md-nav__link">
    References and Resources
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#turning-off-theta-v-stitching" title="Turning off THETA V Stitching" class="md-nav__link">
    Turning off THETA V Stitching
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stitching-with-post-shoot-tools" title="Stitching with Post-Shoot Tools" class="md-nav__link">
    Stitching with Post-Shoot Tools
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ptgui" title="PTGui" class="md-nav__link">
    PTGui
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#original-image" title="Original Image" class="md-nav__link">
    Original Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stitched-image" title="Stitched Image" class="md-nav__link">
    Stitched Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#close-up-image" title="Close-up Image" class="md-nav__link">
    Close-up Image
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-stitching-solutions" title="Other Stitching Solutions" class="md-nav__link">
    Other Stitching Solutions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/theta360developers/plugin-guide/edit/master/docs/fisheye.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="dual-fisheye-still-image">Dual-Fisheye Still Image</h1>
<p>By using plug-in technology, you can improve the user experience for your customers. One example is to
reduce the time between still image shots. The RICOH THETA S requires approximately 8 seconds between
shots. The RICOH THETA V reduced this time to 4 seconds. The dual-fisheye plug-in reduces
the time between shots to less than a second. </p>
<p>The reduction in time is achieved by delaying the process of converting dual-fisheye images into a single equirectangular image inside the camera.</p>
<p>This is useful for the following applications:</p>
<ol>
<li>HDR</li>
<li>Timelapse</li>
<li>High volume pictures such as taking 1,000 images at a large construction site</li>
<li>Factory or workflow optimization (Taking pictures of an assembly line or other process involving people moving items)</li>
<li>Computer graphics 3D model scenes to get lighting information</li>
</ol>
<h2 id="concepts-covered">Concepts Covered</h2>
<ul>
<li>Image stitching control</li>
<li>Permission setting to access storage and camera</li>
<li>Post-production workflow</li>
<li>Conversion of dual-fisheye to equirectangular</li>
<li>High Dynamic Range Images</li>
</ul>
<h2 id="install-apk-from-source">Install apk from Source</h2>
<h3 id="requirements">Requirements</h3>
<ul>
<li>Tested with THETA V firmware 2.40.2</li>
</ul>
<h3 id="known-issues">Known Issues</h3>
<p>This is a simplified plug-in example with limited error checking. This example is sensitive
to the duration of button presses.</p>
<ul>
<li>if you press the plug-in mode button for too long or too short, the plug-in may crash</li>
<li>if you press the Wi-Fi button for too long to change from single to multi-shot mode, the application may crash</li>
<li>if you press the shutter button for too long when you take the picture or pictures, the application may crash</li>
</ul>
<h3 id="download-github-repository">Download GitHub Repository</h3>
<p>Clone or download the <a href="https://github.com/codetricity/original-dual-fisheye-plugin">GitHub repository for this tutorial</a>.</p>
<p><img alt="GitHub Repo" src="../example/img/fisheye/github-repo.png" /></p>
<p>Repository Organization</p>
<pre><code>/apk/app-debug.apk - binary to install in the RICOH THETA V
/tools/stitcher/MiSphereConverter_for_THETAV.apk - mobile stitching application for your Android phone
/app/src/main/java/com/theta360/pluginapplication/MainActivity.java - main plug-in source code
</code></pre>
<blockquote>
<p>TIP: If you want to use the plug-in first and do not want to download the source, an 
updated apk was released on August 6, 2018. You can <a href="https://drive.google.com/file/d/1DCHBuMGQUsn5ZTolp6YObuiCIsmiZJAX/view?usp=sharing">download the apk</a> 
only. This version is not the same as the apk in the GitHub
repository.</p>
</blockquote>
<h3 id="open-android-project">Open Android Project</h3>
<p><em>File -&gt; Open</em></p>
<p><img alt="File Open" src="../example/img/fisheye/file-open.png" /></p>
<h3 id="build-apk">Build apk</h3>
<p><em>Build -&gt; Build APK(s)</em></p>
<p><img alt="Build apk" src="../example/img/fisheye/build-apk.png" /></p>
<blockquote>
<p>NOTE: If the build fails, you can continue with the tutorial using the
binary apk provided</p>
</blockquote>
<h3 id="locate-apk">Locate apk</h3>
<p><img alt="locate apk" src="../example/img/fisheye/locate-apk.png" /></p>
<h3 id="use-adb-to-install-apk">use adb to install apk</h3>
<p>Connect your THETA V to your workstation with a USB cable. </p>
<p>cd into the directory that your apk is in.</p>
<pre><code>adb install -r app-debug.apk
</code></pre>
<blockquote>
<p>NOTE: If you've previously installed the THETA Plug-in SDK apk, you must
first uninstall the SDK plug-in from the THETA. If adb does not detect your
camera, unplug the camera and plug it back in.  If the camera is still not
detected, verify that your camera is unlocked. You must join the partner
program to unlock your camera.</p>
</blockquote>
<h3 id="use-vysor-to-set-apk-permissions">use Vysor to set apk permissions</h3>
<h4 id="start-vysor">Start Vysor</h4>
<p><img alt="" src="../img/dualfish/vysor.png" /></p>
<h4 id="select-apps-in-settings">Select Apps in Settings</h4>
<p><img alt="" src="../img/dualfish/settings.png" /></p>
<p>Scroll down until you see apps.</p>
<p><img alt="" src="../img/dualfish/settings-apps.png" /></p>
<h4 id="select-plugin-application">Select <em>Plugin Application</em></h4>
<p><img alt="" src="../img/dualfish/apps.png" /></p>
<h4 id="in-app-info-select-permissions">In App Info select Permissions</h4>
<p><img alt="" src="../img/dualfish/app-info.png" /></p>
<h4 id="enable-storage-and-camera">Enable storage and camera</h4>
<p><img alt="" src="../img/dualfish/permission.png" /></p>
<h3 id="reboot-camera-and-put-into-plug-in-mode">Reboot Camera and Put Into Plug-in Mode</h3>
<ul>
<li>Unplug camera</li>
<li>Hold power button for 8 seconds</li>
<li>Turn camera back on</li>
<li>Hold mode button for 2 seconds or longer</li>
<li>Confirm that that the LED above the shutter button is white</li>
<li>Wi-Fi LED below shutter will be aqua color and flashing</li>
</ul>
<h3 id="taking-pictures">Taking Pictures</h3>
<p>The camera has two modes by default. It can either take a single dual-fisheye image or 
take three dual-fisheye pictures in rapid succession for bracketing.  You can switch
between single image and bracketing mode by pressing the Wi-Fi button on the side of the camera.
This must be a short press of less than 2 seconds.</p>
<h4 id="single-image">Single Image</h4>
<p>In single image mode. the Wi-Fi LED will be aqua and flashing.</p>
<p><a href="https://youtu.be/r3CgivJ0j-Y"><img alt="" src="../img/dualfish/aqua-led.png" /></a></p>
<h4 id="3-shot-mode">3 Shot Mode</h4>
<p>Press the Wi-Fi button on the side of the camera to get
the camera into 3 shot mode.</p>
<p><strong>WARNING: If you press the Wi-Fi button for more than a second, the plug-in may not work properly. Press the Wi-Fi button on the side of the camera firmly and release 
it quickly.</strong></p>
<p>In 3 shot mode, the Wi-Fi LED will be magenta and flashing faster compared
 to when the camera is in still image mode. </p>
<p><img alt="" src="../img/dualfish/bracketing-led.png" /></p>
<p>The gif below was contributed by community member @juantonto.</p>
<p><img alt="HDR bracketing mode magenta LED" src="../dualfish/img/hdr.gif" /></p>
<p>For 3 shot mode, you need to stabilize the camera for the duration of 
the three shots. Place the camera on tripod or stand it up on a table.</p>
<p>Press the shutter button.</p>
<p>Refer to the video above for the expected behavior of the camera,
including LED and audio feedback.</p>
<h3 id="confirm-pictures-were-taken">Confirm Pictures were Taken</h3>
<p>Connect camera to your computer with a USB cable.</p>
<p>In a file browser such as File Explorer, click into RICOH THETA V in
the same process you use for a normal camera or storage device.
Go into <code>DCIM/100RICOH</code>. You will see the dual-fisheye images with
filenames that contain a date and time stamp.</p>
<p><img alt="" src="../img/dualfish/dual-fisheye-file.png" /></p>
<h2 id="stitching-dual-fisheye-images-into-equirectangular">Stitching Dual-fisheye Images Into Equirectangular</h2>
<p>For most applications, you will need to stitch the images in post-production processing
using your own stitching library. For this tutorial, we will use a few 
commercial products to stitch the dual-fisheye image into equirectangular. 
Third-party stitching libraries do not have the lens parameter information
from Ricoh and thus require manual callibration for each camera. Ricoh does
not make the lens parameter information available.</p>
<h3 id="android-phone-stitching-application">Android Phone Stitching Application</h3>
<p>Ichi Hirota has produced a stitching library and Android mobile phone app that requires a one-time callibration for each camera. A trial version
of the callibration app is available <a href="https://drive.google.com/file/d/1FyXHzDXUmuuqJyNgrYt0sOa_IidDSHcC/view?usp=sharing">here</a>.  This trial version of the app has a watermark.</p>
<p>The mobile app apk is also available in the GitHub repository you downloaded for this tutorial.
It is under the directory <a href="https://github.com/codetricity/original-dual-fisheye-plugin/tree/master/tools/stitcher">tools/stitcher</a>.</p>
<p>You can commercially license Ichi's stitching library 
and Android application.
For more information on licensing Ichi's stitching library and Android application,
please contact Jesse Casman at jcasman@oppkey.com.</p>
<p>If you prefer to use a desktop application, you can use PTGui. The guide to use PTGui
to stitch the image is provided at the end of this article.</p>
<h4 id="original-dual-fisheye-image">Original Dual-fisheye Image</h4>
<p><img alt="dual-fisheye image" src="../img/dualfish/original.jpg" /></p>
<h4 id="callibration-application">Callibration Application</h4>
<p><img alt="Instructions" src="../img/dualfish/callib-1.jpg" /></p>
<p>Dual-fisheye image loaded into callibration app.</p>
<p><img alt="Image loaded into callibration app" src="../img/dualfish/callib-2.jpg" /></p>
<p>The lens distortion is compensated for
by selecting points on the edges of the spheres. This is a one time process. 
The lens distortion information is then stored in the mobile app.</p>
<p><img alt="" src="../img/dualfish/callib-3.jpg" /></p>
<p><img alt="Callibration App" src="../img/dualfish/callibration-app.jpg" /></p>
<p>When you select the points of overlap, the callibration app
will present a zoom view so that you can precisely select 
the overlap. In the view below, we're using the tree branch
as the callibration point.</p>
<p><img alt="Zoom of callibration" src="../img/dualfish/callibration-2.jpg" /></p>
<p>HDR is handled by the application.</p>
<p><img alt="" src="../img/dualfish/callibration-3.jpg" /></p>
<h4 id="stitching-results">Stitching Results</h4>
<p><img alt="" src="../img/dualfish/stitched.jpg" /></p>
<h4 id="close-up-on-stitch-line">Close-Up on Stitch Line</h4>
<p>Viewed using the Ricoh Desktop Appplication</p>
<p><img alt="" src="../img/dualfish/closeup-1.jpg" /></p>
<p><img alt="" src="../img/dualfish/closeup-2.jpg" /></p>
<p><img alt="" src="../img/dualfish/closeup-3.jpg" /></p>
<h2 id="hdr-blending-3-shots-into-single-image">HDR - Blending 3 Shots into Single Image</h2>
<p>You can use <a href="http://www.hdrlabs.com/picturenaut/">Picturenaut</a> from HDR Labs to combine the 3 images into a single image.</p>
<p><img alt="picturenaut GUI" src="../example/img/fisheye/picturenaut.jpg" /></p>
<p><img alt="picturenaut 3 image HDR" src="../example/img/fisheye/3-image-hdr.jpg" /></p>
<p>Picturenaut outputs a TIFF file. I converted this to jpeg using another graphics
program called <a href="https://www.gimp.org/">GIMP</a>. </p>
<p><img alt="gimp export" src="../example/img/fisheye/gimp-export.jpg" /></p>
<p><img alt="gimp jpg" src="../example/img/fisheye/gimp-jpg.png" /></p>
<p>I then used PTGui to stitch the dual-fisheye to equirectangular.</p>
<p><img alt="Stitching with PTGui" src="../example/img/fisheye/ptgui-stitched.jpg" /></p>
<p><img alt="PTGui interface" src="../example/img/fisheye/ptgui-interface.png" /></p>
<h2 id="modify-code-to-take-7-images">Modify Code to Take 7 Images</h2>
<p>Let's modify the code to take 7 pictures with 7 different 
exposure compensation values:</p>
<p>-2.0, -1.3, -0.7, 0.0, 0.7, 1.3, 2.0</p>
<p><img alt="7 images" src="../example/img/fisheye/7-image.jpg" /></p>
<h3 id="benefits">Benefits</h3>
<p>Basic information on High Dynamic Range Imaging (HDRi) is available on 
<a href="https://en.wikipedia.org/wiki/High-dynamic-range_imaging">Wikipedia</a>.</p>
<p>This image shows some of the benefits.</p>
<p><img alt="Wikipedia" src="../example/img/fisheye/wikipedia-hdri.png" /></p>
<p>HDRi is also commonly used in the digital graphics industry. The
graphic below from the <a href="https://docs.unity3d.com/Manual/LookDevHDRIView.html">Unity HDRI view documentation</a> 
will give you a feel for how HDRI can help with lighting and perspective.</p>
<p><img alt="Unity documentation" src="../example/img/fisheye/LookDevHDRIView-0.png" /></p>
<h3 id="steps">Steps</h3>
<h4 id="1-open-mainactivityjava">1. Open MainActivity.java</h4>
<p>Under <code>app/java/com.theta360.pluginapplication</code>, locate <code>MainActivity</code>.</p>
<p><img alt="MainActivity" src="../example/img/fisheye/mainactivity.png" /></p>
<h4 id="2-add-variable-for-numberofimages">2. Add Variable for NumberOfImages</h4>
<p>In <code>MainActivity.java</code>, add an integer variable called numberOfImages and set the value to 7.</p>
<p><img alt="NumberOfImages" src="../example/img/fisheye/numberOfImages.png" /></p>
<h4 id="3-reset-bracket-count">3. Reset Bracket Count</h4>
<p>At roughly line 167, reset the variable bcnt to the numberOfImages.</p>
<p><img alt="Reset Bracket Count" src="../example/img/fisheye/reset-bcnt.png" /></p>
<h4 id="4-locate-nextshutter">4. Locate nextShutter()</h4>
<p>At roughly line 192, identify the section for <code>nextShutter()</code></p>
<p><img alt="nextShutter()" src="../example/img/fisheye/next-shutter.png" /></p>
<h4 id="5-create-if-statement-for-modification">5. Create if statement for modification</h4>
<p>We will use an if statement to isolate your modification and preserve
the original 3 image algorithm as a reference.</p>
<p>At roughly line 200, look for the line <code>if(bcnt &gt; 0)</code>. Inside that 
statement create an if statement under the line, </p>
<pre><code>params.set("RIC_SHOOTING_MODE", "RicStillCaptureStd");
</code></pre>
<p>Below this line, add <code>if (numberOfImages == 7) {}</code></p>
<p><img alt="if statement" src="../example/img/fisheye/if-statement.png" /></p>
<h4 id="6-review-exposure-compensation-api">6. Review Exposure Compensation API</h4>
<p>We will adjust the exposure compensation value for every image
in our 7 image set. Before modifying the code, let's look at
the options the API provides for adjustment.</p>
<p>RICOH Camera API for exposure compensation is available at: </p>
<p><a href="https://api.ricoh/docs/theta-plugin-reference/camera-api/">https://api.ricoh/docs/theta-plugin-reference/camera-api/</a></p>
<p><img alt="Exposure Compensation" src="../example/img/fisheye/exposure-compensation-api.png" /></p>
<h4 id="7-adjust-exposure-compensation">7. Adjust Exposure Compensation</h4>
<p>We will start the exposure compensation value at -6 and adjust it up by 
2 for each image. With 7 images, this value will be changed with these values for
each image: -6, -4, -2, 0, 2, 4, 6.</p>
<p>The code for setting exposure compensation is shown below.</p>
<pre><code>if(bcnt &gt; 0) {
    params = mCamera.getParameters();
    params.set("RIC_SHOOTING_MODE", "RicStillCaptureStd");
    if (numberOfImages == 7) {
        params.setExposureCompensation(exposureCompensationValue);
        exposureCompensationValue = exposureCompensationValue + 2;
    } else {
        params.setExposureCompensation(3 * ((bcnt - 2)));
    }

    bcnt = bcnt - 1;
</code></pre>
<p>A complete repository of the modified code is here:</p>
<p><a href="https://github.com/codetricity/theta-7-image-dual-fisheye">https://github.com/codetricity/theta-7-image-dual-fisheye</a></p>
<h4 id="8-build-and-install">8. Build and Install</h4>
<p>Build the apk. Before installing the apk, you must manually delete the 
existing Plugin Application from your camera. </p>
<p>Follow this process:</p>
<ol>
<li>build apk in Android Studio</li>
<li>use Vysor or the Ricoh desktop app to uninstall the existing plug-in application</li>
<li>use adb install -r app-debug.apk to install the new apk you just built</li>
</ol>
<h4 id="9-create-single-hdr-image">9. Create Single HDR Image</h4>
<p>Use picturenaut to merge the 7 images into a single HDR image.</p>
<p><img alt="Picturenaut with 7 images" src="../example/img/fisheye/picturenaut.png" /></p>
<p><img alt="merged" src="../example/img/fisheye/merged-image.jpg" /></p>
<h4 id="10-stitch-dual-fisheye-image-into-equirectangular">10. Stitch Dual-fisheye Image into Equirectangular</h4>
<p>I used Ichi Hirota's mobile app for the stitching.</p>
<p><img alt="stitched image" src="../example/img/fisheye/stitched-image.jpg" /></p>
<p><img alt="closeup image" src="../example/img/fisheye/closeup.jpg" /></p>
<p>Here's a view of the stitch line on the other side of the picture.</p>
<p><img alt="2nd stitch line" src="../example/img/fisheye/stitch-line-2.jpg" /></p>
<p>Here's a closeup of the stitch line. It's almost impossible to see it.</p>
<p><img alt="Closeup 2" src="../example/img/fisheye/closeup-2.jpg" /></p>
<p><strong>Congratulations! You've completed the dual-fisheye tutorial!</strong></p>
<h2 id="references-and-resources">References and Resources</h2>
<h2 id="turning-off-theta-v-stitching">Turning off THETA V Stitching</h2>
<p>Still images can be saved as dual-fisheye by adjusting the stitching parameter.</p>
<pre><code>mParameters.set("RIC_PROC_STITCHING_TYPE", "RicNonStitching");
</code></pre>
<p>The size of the dual-fish image is 5792x2896. Use the command below:</p>
<pre><code>mParameters.setPictureSize(5792, 2896);
</code></pre>
<p>The picture below is from Ichi Hirota.</p>
<p><img alt="" src="../img/custom/dual-fish-sample.jpg" /></p>
<p><img alt="" src="../img/custom/dual-fish-meta-data.png" /></p>
<p><a href="https://community.theta360.guide/t/dual-fisheye-images-with-theta-v-plug-in/2692/8?u=codetricity">This article</a> 
provides more information on a plug-in built by community
developer Ichi Hirota.</p>
<p>Here's example code from Ichi Hirota.</p>
<p><img alt="" src="../img/custom/dualfish-bracketing.png" /></p>
<h3 id="stitching-with-post-shoot-tools">Stitching with Post-Shoot Tools</h3>
<p>Instead of stitching the dual-fisheye image inside of the camera, you will
need to use tools on your PC to convert the dual-fisheye image into equirectangular.</p>
<h4 id="ptgui">PTGui</h4>
<p>Community member Svendus has 
<a href="https://community.theta360.guide/t/dual-fisheye-images-with-theta-v-plug-in/2692/31?u=codetricity">reported</a> success stitching hundreds of spheres on 
PC and Mac using <a href="https://www.ptgui.com/">PTGui</a> 11.2. A free trial version
is available.</p>
<p>This <a href="https://drive.google.com/file/d/1RzvS-VfOvAQuu7UIDkpHa2RB2OlYmosF/view?usp=sharing">project file bundle</a> has both a preset for THETA images as well as an example image.</p>
<p><img alt="ptgui menu" src="../dualfish/img/ptgui/ptgui-menu.png" /></p>
<h5 id="original-image">Original Image</h5>
<p><img alt="original image" src="../dualfish/img/ptgui/original.jpg" /></p>
<h5 id="stitched-image">Stitched Image</h5>
<p><img alt="stitched image" src="../dualfish/img/ptgui/stitched.jpg" /></p>
<h5 id="close-up-image">Close-up Image</h5>
<p>Using the THETA Desktop Application to view the stitched image.</p>
<p><img alt="close-up image" src="../dualfish/img/ptgui/closeup.jpg" /></p>
<h4 id="other-stitching-solutions">Other Stitching Solutions</h4>
<p>Community member squizard360 is <a href="https://community.theta360.guide/t/dual-fisheye-images-with-theta-v-plug-in/2692/28?u=codetricity">experimenting</a> with Hugin and the 
<a href="https://github.com/evertvorster/dualfisheye2equirectangular_ffmpeg_remap">dualfisheye2equirectangular_ffmpeg_remap project</a> from 
<a href="https://github.com/evertvorster">evertvorster</a>.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../tutorialbutton/" title="Tutorial - Camera Buttons" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Tutorial - Camera Buttons
              </span>
            </div>
          </a>
        
        
          <a href="../example/wireless/" title="Example - Wireless Live Streaming" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Example - Wireless Live Streaming
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.oppkey.com">Oppkey</a>
        and
        <a href="http://theta360.guide">
          the awesome community of developers at theta360.guide</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/theta360developers" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/theta360dev" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.facebook.com/theta360guide/" class="md-footer-social__link fa fa-facebook"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.5165553b.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-73311422-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>